/* ========= Fuente ========= */
@import url("https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;500;700&display=swap");

/* ========= Variables ========= */
:root{
  --bg: #0b0d11;
  --panel: #12151c;
  --card: #171b22;
  --text: #e7ebf3;
  --muted:#a7b0c0;
  --brand:#67b5d4;
  --border: rgba(255,255,255,.08);
  --accent: #4f9cff;
}

/* ========= Reset / Base ========= */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:"Ubuntu",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif;
  background: linear-gradient(120deg, #0b0d11, #0e1117);
  color:var(--text);
}

/* ========= Layout ========= */
.container{
  display:grid;
  grid-template-columns:280px 1fr;
  min-height:100vh;
}

/* Sidebar */
.navigation{
  background:var(--panel);
  border-right:1px solid var(--border);
  position:sticky; top:0;
  height:100vh; overflow-y:auto;
  transition: width .25s ease, transform .25s ease, left .25s ease;
  z-index:1000;
}
.navigation ul{list-style:none; margin:0; padding:16px 8px;}
.navigation li{margin-bottom:6px;}
.navigation a{
  display:grid; grid-template-columns:32px auto;
  gap:12px; align-items:center;
  padding:12px 14px; border-radius:10px;
  color:var(--text); text-decoration:none;
  transition:background .2s ease;
}
.navigation .brand a{background:transparent; color:var(--brand); font-weight:700; font-size:18px; cursor:default;}
.navigation .nav-item a:hover,.navigation .nav-item.hovered a{background:var(--card);}
.navigation .icon{display:grid; place-items:center; font-size:20px; color:var(--brand);}
.navigation .title{white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}

.main{position:relative; min-width:0;}

/* Topbar */
.topbar{
  position:sticky; top:0; z-index:900;
  display:grid; grid-template-columns:52px 1fr auto auto;
  align-items:center; gap:16px;
  padding:14px 18px;
  background:rgba(18,21,28,.7);
  backdrop-filter:blur(10px);
  border-bottom:1px solid var(--border);
}
.toggle{
  width:42px;height:42px; display:grid; place-items:center;
  border-radius:10px; background:var(--card); color:var(--text);
  cursor:pointer; transition:filter .2s ease;
}
.toggle:hover{filter:brightness(1.1);}

/* Search */
.search label{
  display:grid; grid-template-columns:1fr 36px; align-items:center;
  background:var(--card); border:1px solid var(--border);
  border-radius:12px; overflow:hidden;
}
.search input{
  background:transparent; color:var(--text);
  border:0; outline:0; height:42px; padding:0 12px; font-size:15px;
}
.search ion-icon{display:grid; place-items:center; font-size:18px; opacity:.9}

/* Controls (selector + botones) */
.controls{display:flex; gap:8px; align-items:center;}
.controls select{
  height:42px; background:var(--card); color:var(--text);
  border:1px solid var(--border); border-radius:10px; padding:0 10px;
}
.btn{
  height:42px; padding:0 12px; border-radius:10px;
  background:var(--accent); color:white; border:0; cursor:pointer;
  transition:filter .2s ease;
}
.btn:hover{filter:brightness(1.05);}

/* User */
.user{font-size:14px; color:var(--muted);}

/* Content */
.content{padding:18px;}
#mapid{
  width:100%;
  height:calc(100vh - 120px);
  border-radius:14px; border:1px solid var(--border);
  background:var(--card); overflow:hidden;
}
.stats{
  margin:0 0 10px;
  font-size:14px; color:var(--muted);
}

/* Leaflet popup: respetar saltos de línea */
.leaflet-popup-content,
.popup-multiline{white-space:pre-line; font-size:14px;}

/* Overlay cuando el menú está abierto en móvil */
.main.active::after{
  content:"";
  position:fixed; inset:0;
  background:rgba(0,0,0,.45);
  z-index:800;
}

/* Responsive */
@media (max-width:1024px){
  .container{grid-template-columns:76px 1fr;}
  .navigation{width:76px;}
  .navigation .title{display:none;}
}
@media (max-width:768px){
  .container{grid-template-columns:1fr;}
  .navigation{
    position:fixed; left:-260px; top:0; width:260px;
    height:100vh;
  }
  .navigation.active{left:0;}
  #mapid{height:calc(100vh - 128px);}
  .topbar{grid-template-columns:52px 1fr;}
  .controls{grid-column:1 / -1; justify-self:end;}
  /* Asegura que el botón quede por encima del overlay y del mapa */
  .toggle{position:relative; z-index:1100;}
}
